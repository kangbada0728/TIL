# 로드밸런싱이란

> [!info]
> 서버가 처리해야 할 업무 혹은 요청(Load)을 여러 대의 서버로 나누어서(Balancing) 처리하는 것을 의미한다.

- 한대의 서버로 부하가 집중되지 않도록 트래픽을 관리해 각각의 서버가 최적의 퍼포먼스를 보일 수 있도록 하는 것이 목적

- 트래픽이 늘어나면 한대의 서버로 이를 감당할 수 없게 된다.
- 이를 해결하는 방법은 크게 두가지이다.
	- Scale-up : 기존 서버 성능을 확장
	- Scale-out : 서버를 증설

- Scale-up 은 영원히 서버 성능을 높일 수 는 없고, 그 서버 한대가 문제가 생기면 전체 시스템이 정지되는 문제를 가지고 있기에 한계가 있는 방법이다.
	- SPOF (Single Point Of Failure)
- 그래서 보통 이런 문제를 해결하기 위해 Scale-out 을 선택하게 된다.
	- 그리고 이렇게 늘어난 서버들 사이에서 균등하게 요청을 분배하기 위해 로드밸런싱을 수행하게 된다.


# L4 로드 밸런싱 vs L7 로드 밸런싱

##  L4 로드 밸런싱

- Layer 4 전송 계층 (Transport Layer)
- TCP, UDP 포트 정보를 바탕으로 수행된다.

- 데이터 안을 들여다보지 않고 패킷 레벨에서만 로드를 분산하기 때문에 속도가 빠르고 효율이 좋음
- 데이터 내용을 복화화할 필요가 없기에 안전함
- L7 로드밸런서보다 가격이 싸다

- 패킷 내용을 볼수 없기 때문에 섬세한 라우팅이 불가하다.
- 사용자의 IP 가 수시로 바뀌는 경우라면 연속적인 서비스가 불가하다.


## L7 로드 밸런싱

- Layer 7 애플리케이션 계층 (Application Layer)
- TCP, UDP 포트 정보 + HTTP URI, FTP 파일명, 쿠키 정보 등의 정보를 바탕으로 수행된다.

- 상위 계층에서 로드를 분산하기 때문에 훨씬 더 섬세한 라우팅이 가능하다.
- 캐싱 기능을 제공한다.
- 비정상적인 트래픽을 사전에 필터링할 수 있어 서비스 안정성이 높다.

- 패킷의 내용을 복호화해야 하기에 더 높은 비용을 지불해야 한다.
- 클라이언트가 로드밸런서와 인증서를 공유해야하기 때문에 공격자가 로드밸런서를 통해서 클라이언트의 데이터에 접근할 보안 상의 위험성이 존재한다.

# Reference
- https://tecoble.techcourse.co.kr/post/2021-11-07-load-balancing/